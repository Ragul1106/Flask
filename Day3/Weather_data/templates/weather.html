{% extends "base.html" %}
{% block title %}Today’s Weather{% endblock %}
{% block content %}
  <section class="weather-section">
    <h1>Today’s Weather — {{ today.city }}</h1>

    <div class="weather-card">
      <div class="weather-main">
        <div class="weather-icon">
          {% if today.condition == 'sunny' %}
            <img src="{{ url_for('static', filename='images/sun.png') }}" alt="Sunny icon">
          {% elif today.condition == 'rain' %}
            <img src="{{ url_for('static', filename='images/rain.jpeg') }}" alt="Rain icon">
          {% else %}
            <img src="{{ url_for('static', filename='images/sun.png') }}" alt="Weather icon">
          {% endif %}
        </div>
        <div class="weather-info">
          <p class="temp"><strong>{{ today.temperature }}°C</strong></p>
          <p class="cond text-muted">{{ today.condition|title }}</p>
          {% if today.temperature > 30 %}
            <p class="advisory hot">Stay Hydrated</p>
          {% endif %}
        </div>
      </div>

      <div class="chart-wrap">
        <h2 class="chart-title">Temperature Today</h2>
        <canvas id="tempChart" width="600" height="300"></canvas>
      </div>
    </div>
  </section>

  <script>
    // Correctly define the object literal using curly braces
    window.__WEATHER__ = {
        labels: {{ today.hours | tojson }},
        temps: {{ today.temps | tojson }}
        title: "Temperature (°C)"
    };
</script>
{% endblock %}
